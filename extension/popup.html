<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=350">
  <title>WhatsApp KeepAlive</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- STEP 1: TELEFONO -->
  <div id="step-phone" class="step active">
    <div class="header">
      <h1>WhatsApp KeepAlive</h1>
      <button id="btn-settings" class="btn-gear" title="Configuracion">&#9881;</button>
    </div>
    <div class="body">
      <div class="form-group">
        <label for="input-phone">Tu numero de WhatsApp (con codigo de pais)</label>
        <input type="tel" id="input-phone" placeholder="5491112345678" autocomplete="off">
      </div>
      <!-- Settings oculto -->
      <div id="settings-area" class="settings-area hidden">
        <div class="form-group">
          <label for="input-server">URL del servidor</label>
          <input type="url" id="input-server" placeholder="https://tu-servidor.easypanel.host" autocomplete="off">
        </div>
      </div>
      <button id="btn-continue" class="btn btn-primary">Continuar</button>
      <p class="version-text">Version 1.0</p>
    </div>
  </div>

  <!-- STEP 2: SALAS -->
  <div id="step-rooms" class="step">
    <div class="header">
      <button id="btn-back-rooms" class="btn-back" title="Volver">&#8592;</button>
      <h1>Elegi una sala</h1>
    </div>
    <div class="body">
      <div id="rooms-loading" class="loading-area">
        <div class="spinner"></div>
        <p>Cargando salas...</p>
      </div>
      <div id="rooms-list" class="rooms-list"></div>
      <div id="rooms-error" class="error-msg hidden"></div>
    </div>
  </div>

  <!-- STEP 3: CONTRASENA -->
  <div id="step-password" class="step">
    <div class="header">
      <button id="btn-back-password" class="btn-back" title="Volver">&#8592;</button>
      <h1 id="password-title">Contrasena</h1>
    </div>
    <div class="body">
      <div class="form-group">
        <label for="input-password">Contrasena de la sala</label>
        <input type="password" id="input-password" placeholder="Ingresa la contrasena" autocomplete="off">
      </div>
      <button id="btn-join" class="btn btn-primary">Unirse</button>
      <div id="password-error" class="error-msg hidden"></div>
    </div>
  </div>

  <!-- STEP 4: CONECTADO -->
  <div id="step-connected" class="step">
    <div class="header">
      <h1 id="connected-room-name">Sala</h1>
    </div>
    <div class="body">
      <div class="status-card">
        <div class="status-row">
          <span class="pulse-dot"></span>
          <span class="status-text">Conectado</span>
          <span id="user-count" class="user-count"></span>
        </div>
      </div>
      <div class="wa-status-card">
        <div class="wa-status-row">
          <span class="wa-icon wa-icon-ok">&#10003;</span>
          <span>WhatsApp Web activo</span>
        </div>
      </div>
      <div id="last-action" class="last-action"></div>
      <button id="btn-leave" class="btn btn-danger">Salir de la sala</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
